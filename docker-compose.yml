version: '3.8'

services:
  autohedge:
    build: .
    container_name: autohedge
    volumes:
      - ./outputs:/app/outputs
      - ./data:/app/data
    ports:
      - "8000:8000"
    environment:
      - OUTPUT_DIR=/app/outputs
      # Alert System Environment Variables (optional)
      - SMTP_SERVER=${SMTP_SERVER:-smtp.gmail.com}
      - SMTP_PORT=${SMTP_PORT:-587}
      - SENDER_EMAIL=${SENDER_EMAIL:-}
      - SENDER_PASSWORD=${SENDER_PASSWORD:-}
      - RECIPIENT_EMAIL=${RECIPIENT_EMAIL:-}
      - SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL:-}
      - ALERT_CHECK_INTERVAL=${ALERT_CHECK_INTERVAL:-60}
    depends_on:
      - ollama
    networks:
      - autohedge-network

  ollama:
    image: ollama/ollama:latest
    container_name: ollama
    volumes:
      - ollama-data:/root/.ollama
    ports:
      - "11434:11434"
    networks:
      - autohedge-network

networks:
  autohedge-network:
    driver: bridge

volumes:
  ollama-data:
